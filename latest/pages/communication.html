<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Communication · DaskDistributedDispatcher.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/invenia.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>DaskDistributedDispatcher.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><a class="toctext" href="manual.html">Manual</a></li><li><a class="toctext" href="api.html">API</a></li><li><a class="toctext" href="workers.html">Workers</a></li><li class="current"><a class="toctext" href="communication.html">Communication</a><ul class="internal"><li><a class="toctext" href="#API-1">API</a></li><li><a class="toctext" href="#Server-1">Server</a></li><li><a class="toctext" href="#Rpc-1">Rpc</a></li><li><a class="toctext" href="#ConnectionPool-1">ConnectionPool</a></li><li><a class="toctext" href="#BatchedSend-1">BatchedSend</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="communication.html">Communication</a></li></ul><a class="edit-page" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/docs/src/pages/communication.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Communication</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Communication-1" href="#Communication-1">Communication</a></h1><p>All communication between the julia client and workers with the scheduler is sent using the MsgPack protocol as <a href="https://distributed.readthedocs.io/en/latest/protocol.html"><code>specified by the dask-scheduler</code></a>. Workers also use this to commmunicate between themselves and gather dependencies. TCP connections are used for all communication. Julia functions, arguments, and keyword arguments are serialized before being sent. <a href="workers.html#DaskDistributedDispatcher.Worker"><code>Worker</code></a>s and <a href="api.html#DaskDistributedDispatcher.Client"><code>Client</code></a>s should all belong to the same julia cluster or will not be able to communicate properly.</p><h2><a class="nav-anchor" id="API-1" href="#API-1">API</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_recv-Tuple{TCPSocket,Dict{String,T}}" href="#DaskDistributedDispatcher.send_recv-Tuple{TCPSocket,Dict{String,T}}"><code>DaskDistributedDispatcher.send_recv</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_recv{T}(sock::TCPSocket, msg::Dict{String, T})</code></pre><p>Send a message and wait for the response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L3-L7">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_msg-Tuple{TCPSocket,Union{Array,Dict,String}}" href="#DaskDistributedDispatcher.send_msg-Tuple{TCPSocket,Union{Array,Dict,String}}"><code>DaskDistributedDispatcher.send_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_msg(sock::TCPSocket, msg::Union{String, Array, Dict})</code></pre><p>Send <code>msg</code> to <code>sock</code> serialized by MsgPack following the dask.distributed protocol.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L19-L23">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.recv_msg-Tuple{TCPSocket}" href="#DaskDistributedDispatcher.recv_msg-Tuple{TCPSocket}"><code>DaskDistributedDispatcher.recv_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">recv_msg(sock::TCPSocket) -&gt; Union{String, Array, Dict}</code></pre><p>Recieve <code>msg</code> from <code>sock</code> and deserialize it from msgpack encoded bytes to strings.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L42-L46">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.close_comm-Tuple{TCPSocket}" href="#DaskDistributedDispatcher.close_comm-Tuple{TCPSocket}"><code>DaskDistributedDispatcher.close_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">close_comm(comm::TCPSocket)</code></pre><p>Tell peer to close and then close the TCPSocket <code>comm</code></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L55-L59">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.read_msg-Tuple{Any}" href="#DaskDistributedDispatcher.read_msg-Tuple{Any}"><code>DaskDistributedDispatcher.read_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">read_msg(msg::Any)</code></pre><p>Convert <code>msg</code> from bytes to strings except for serialized parts.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L69-L73">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.to_serialize-Tuple{Any}" href="#DaskDistributedDispatcher.to_serialize-Tuple{Any}"><code>DaskDistributedDispatcher.to_serialize</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">to_serialize(item) -&gt; Vector{UInt8}</code></pre><p>Serialize <code>item</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L88-L92">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.to_deserialize-Tuple{Array{UInt8,1}}" href="#DaskDistributedDispatcher.to_deserialize-Tuple{Array{UInt8,1}}"><code>DaskDistributedDispatcher.to_deserialize</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">to_deserialize(serialized_item::Vector{UInt8}) -&gt; Any</code></pre><p>Parse and deserialize <code>serialized_item</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L101-L105">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.pack_data-Tuple{Any,Dict{String,Any}}" href="#DaskDistributedDispatcher.pack_data-Tuple{Any,Dict{String,Any}}"><code>DaskDistributedDispatcher.pack_data</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">pack_data(object, data::Dict{String, Any})</code></pre><p>Merge known <code>data</code> into <code>object</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L115-L119">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.pack_object-Tuple{Any,Dict{String,Any}}" href="#DaskDistributedDispatcher.pack_object-Tuple{Any,Dict{String,Any}}"><code>DaskDistributedDispatcher.pack_object</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">pack_object(object, data::Dict{String, Any})</code></pre><p>Replace a DispatchNode&#39;s key with its result only if <code>object</code> is a known key.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L130-L134">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.unpack_data-Tuple{Any}" href="#DaskDistributedDispatcher.unpack_data-Tuple{Any}"><code>DaskDistributedDispatcher.unpack_data</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">unpack_data(object)</code></pre><p>Unpack <code>DispatchNode</code> objects from <code>object</code>. Returns the unpacked object.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L139-L143">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.unpack_object-Tuple{Any}" href="#DaskDistributedDispatcher.unpack_object-Tuple{Any}"><code>DaskDistributedDispatcher.unpack_object</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">unpack_object(object)</code></pre><p>Replace <code>object</code> with its key if <code>object</code> is a DispatchNode or else returns the original <code>object</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/utils_comm.jl#L150-L155">source</a><br/></section><h2><a class="nav-anchor" id="Server-1" href="#Server-1">Server</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.Server" href="#DaskDistributedDispatcher.Server"><code>DaskDistributedDispatcher.Server</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">Server</code></pre><p>Abstract type to listen for and handle incoming messages.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L3-L7">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.start_listening-Tuple{DaskDistributedDispatcher.Server}" href="#DaskDistributedDispatcher.start_listening-Tuple{DaskDistributedDispatcher.Server}"><code>DaskDistributedDispatcher.start_listening</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">start_listening(server::Server; handler::Function=handle_comm)</code></pre><p>Listen for incoming connections on a port and dispatches them to be handled.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L10-L14">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.handle_comm-Tuple{DaskDistributedDispatcher.Server,TCPSocket}" href="#DaskDistributedDispatcher.handle_comm-Tuple{DaskDistributedDispatcher.Server,TCPSocket}"><code>DaskDistributedDispatcher.handle_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">handle_comm(server::Server, comm::TCPSocket)</code></pre><p>Listen for incoming messages on an established connection.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L29-L33">source</a><br/></section><h2><a class="nav-anchor" id="Rpc-1" href="#Rpc-1">Rpc</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.Rpc" href="#DaskDistributedDispatcher.Rpc"><code>DaskDistributedDispatcher.Rpc</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">Rpc</code></pre><p>Manage open socket connections to a specific address.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L76-L80">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.Rpc-Tuple{DaskDistributedDispatcher.Address}" href="#DaskDistributedDispatcher.Rpc-Tuple{DaskDistributedDispatcher.Address}"><code>DaskDistributedDispatcher.Rpc</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Rpc(address::Address) -&gt; Rpc</code></pre><p>Manage, open, and reuse socket connections to a specific address as required.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L86-L90">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.Rpc,Dict{String,T}}" href="#DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.Rpc,Dict{String,T}}"><code>DaskDistributedDispatcher.send_recv</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_recv{T}(rpc::Rpc, msg::Dict{String, T})</code></pre><p>Send <code>msg</code> and wait for a response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L93-L97">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.start_comm-Tuple{DaskDistributedDispatcher.Rpc}" href="#DaskDistributedDispatcher.start_comm-Tuple{DaskDistributedDispatcher.Rpc}"><code>DaskDistributedDispatcher.start_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">start_comm(rpc::Rpc) -&gt; TCPSocket</code></pre><p>Start a new socket connection.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L105-L109">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.Rpc}" href="#DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.Rpc}"><code>DaskDistributedDispatcher.get_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">get_comm(rpc::Rpc) -&gt; TCPSocket</code></pre><p>Reuse a previously open connection if available, if not, start a new one.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L112-L116">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{DaskDistributedDispatcher.Rpc}" href="#Base.close-Tuple{DaskDistributedDispatcher.Rpc}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Base.close(rpc::Rpc)</code></pre><p>Close all communications.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L126-L130">source</a><br/></section><h2><a class="nav-anchor" id="ConnectionPool-1" href="#ConnectionPool-1">ConnectionPool</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.ConnectionPool" href="#DaskDistributedDispatcher.ConnectionPool"><code>DaskDistributedDispatcher.ConnectionPool</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">ConnectionPool</code></pre><p>Manage a limited number pool of TCPSocket connections to different addresses. Default number of open connections allowed is 512.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L139-L144">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.ConnectionPool-Tuple{Integer}" href="#DaskDistributedDispatcher.ConnectionPool-Tuple{Integer}"><code>DaskDistributedDispatcher.ConnectionPool</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">ConnectionPool(limit::Integer=50) -&gt; ConnectionPool</code></pre><p>Return a new <code>ConnectionPool</code> which limits the total possible number of connections open to <code>limit</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L153-L158">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,Dict{String,T}}" href="#DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,Dict{String,T}}"><code>DaskDistributedDispatcher.send_recv</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_recv{T}(pool::ConnectionPool, address::Address, msg::Dict{String, T})</code></pre><p>Send <code>msg</code> to <code>address</code> and wait for a response.</p><p><strong>Returns</strong></p><ul><li><p><code>Union{String, Array, Dict}</code>: the reply received from <code>address</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L169-L177">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address}" href="#DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address}"><code>DaskDistributedDispatcher.get_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">get_comm(pool::ConnectionPool, address::Address)</code></pre><p>Get a TCPSocket connection to the given address.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L189-L193">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.reuse-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,TCPSocket}" href="#DaskDistributedDispatcher.reuse-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,TCPSocket}"><code>DaskDistributedDispatcher.reuse</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">reuse(pool::ConnectionPool, address::Address, comm::TCPSocket)</code></pre><p>Reuse an open communication to the given address.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L219-L223">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.collect_comms-Tuple{DaskDistributedDispatcher.ConnectionPool}" href="#DaskDistributedDispatcher.collect_comms-Tuple{DaskDistributedDispatcher.ConnectionPool}"><code>DaskDistributedDispatcher.collect_comms</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">collect_comms(pool::ConnectionPool)</code></pre><p>Collect open but unused communications to allow opening other ones.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L234-L238">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{DaskDistributedDispatcher.ConnectionPool}" href="#Base.close-Tuple{DaskDistributedDispatcher.ConnectionPool}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Base.close(pool::ConnectionPool)</code></pre><p>Close all communications.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L253-L257">source</a><br/></section><h2><a class="nav-anchor" id="BatchedSend-1" href="#BatchedSend-1">BatchedSend</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.BatchedSend" href="#DaskDistributedDispatcher.BatchedSend"><code>DaskDistributedDispatcher.BatchedSend</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">BatchedSend</code></pre><p>Batch messages in batches on a stream. Batching several messages at once helps performance when sending a myriad of tiny messages. Used by both the julia worker and client to communicate with the scheduler.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L274-L280">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.BatchedSend-Tuple{TCPSocket}" href="#DaskDistributedDispatcher.BatchedSend-Tuple{TCPSocket}"><code>DaskDistributedDispatcher.BatchedSend</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">BatchedSend(comm::TCPSocket; interval::AbstractFloat=0.002) -&gt; BatchedSend</code></pre><p>Batch messages in batches on <code>comm</code>. We send lists of messages every <code>interval</code> milliseconds.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L288-L293">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.background_send-Tuple{DaskDistributedDispatcher.BatchedSend}" href="#DaskDistributedDispatcher.background_send-Tuple{DaskDistributedDispatcher.BatchedSend}"><code>DaskDistributedDispatcher.background_send</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">background_send(batchedsend::BatchedSend)</code></pre><p>Send the messages in <code>batchsend.buffer</code> every <code>interval</code> milliseconds.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L305-L309">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_msg-Tuple{DaskDistributedDispatcher.BatchedSend,Dict{String,T}}" href="#DaskDistributedDispatcher.send_msg-Tuple{DaskDistributedDispatcher.BatchedSend,Dict{String,T}}"><code>DaskDistributedDispatcher.send_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_msg{T}(batchedsend::BatchedSend, msg::Dict{String, T})</code></pre><p>Schedule a message for sending to the other side. This completes quickly and synchronously.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L323-L327">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{DaskDistributedDispatcher.BatchedSend}" href="#Base.close-Tuple{DaskDistributedDispatcher.BatchedSend}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Base.close(batchedsend::BatchedSend)</code></pre><p>Try to send all remaining messages and then close the connection.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/4a7a58e7353533a9411e8f06a5bd01d6e183acb4/src/comm.jl#L332-L336">source</a><br/></section><footer><hr/><a class="previous" href="workers.html"><span class="direction">Previous</span><span class="title">Workers</span></a></footer></article></body></html>
