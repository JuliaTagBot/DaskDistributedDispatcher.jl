<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Communication · DaskDistributedDispatcher.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/invenia.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>DaskDistributedDispatcher.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><a class="toctext" href="manual.html">Manual</a></li><li><a class="toctext" href="api.html">API</a></li><li><a class="toctext" href="workers.html">Workers</a></li><li class="current"><a class="toctext" href="communication.html">Communication</a><ul class="internal"><li><a class="toctext" href="#API-1">API</a></li><li><a class="toctext" href="#Server-1">Server</a></li><li><a class="toctext" href="#Rpc-1">Rpc</a></li><li><a class="toctext" href="#ConnectionPool-1">ConnectionPool</a></li><li><a class="toctext" href="#BatchedSend-1">BatchedSend</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="communication.html">Communication</a></li></ul><a class="edit-page" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/docs/src/pages/communication.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Communication</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Communication-1" href="#Communication-1">Communication</a></h1><p>All communication between the julia client and workers with the scheduler is sent using the MsgPack protocol as <a href="https://distributed.readthedocs.io/en/latest/protocol.html"><code>specified by the dask-scheduler</code></a>. Workers also use this to commmunicate between themselves and gather dependencies. TCP connections are used for all communication. Julia functions, arguments, and keyword arguments are serialized before being sent. <a href="workers.html#DaskDistributedDispatcher.Worker"><code>Worker</code></a>s and <a href="api.html#DaskDistributedDispatcher.Client"><code>Client</code></a>s should all belong to the same julia cluster or will not be able to communicate properly.</p><h2><a class="nav-anchor" id="API-1" href="#API-1">API</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_recv-Tuple{TCPSocket,Dict}" href="#DaskDistributedDispatcher.send_recv-Tuple{TCPSocket,Dict}"><code>DaskDistributedDispatcher.send_recv</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_recv(sock::TCPSocket, msg::Dict)</code></pre><p>Send a message and wait for the response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L4-L8">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_msg-Tuple{TCPSocket,Union{Array,Dict,String}}" href="#DaskDistributedDispatcher.send_msg-Tuple{TCPSocket,Union{Array,Dict,String}}"><code>DaskDistributedDispatcher.send_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_msg(sock::TCPSocket, msg::Message)</code></pre><p>Send <code>msg</code> to <code>sock</code> serialized by MsgPack following the dask.distributed protocol.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L23-L27">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.recv_msg-Tuple{TCPSocket}" href="#DaskDistributedDispatcher.recv_msg-Tuple{TCPSocket}"><code>DaskDistributedDispatcher.recv_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">recv_msg(sock::TCPSocket) -&gt; Union{Array, Dict}</code></pre><p>Recieve <code>msg</code> from <code>sock</code> and deserialize it from msgpack encoded bytes to strings.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L46-L50">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.close_comm-Tuple{TCPSocket}" href="#DaskDistributedDispatcher.close_comm-Tuple{TCPSocket}"><code>DaskDistributedDispatcher.close_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">close_comm(comm::TCPSocket)</code></pre><p>Tell peer to close and then close the TCPSocket <code>comm</code></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L59-L63">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.read_msg-Tuple{Any}" href="#DaskDistributedDispatcher.read_msg-Tuple{Any}"><code>DaskDistributedDispatcher.read_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">read_msg(msg::Any)</code></pre><p>Convert <code>msg</code> from bytes to strings except for serialized parts.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L73-L77">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.to_serialize-Tuple{Any}" href="#DaskDistributedDispatcher.to_serialize-Tuple{Any}"><code>DaskDistributedDispatcher.to_serialize</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">to_serialize(item)</code></pre><p>Serialize <code>item</code> if possible, otherwise convert to format that can be encoded by msgpack.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L92-L96">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.to_deserialize-Tuple{Any}" href="#DaskDistributedDispatcher.to_deserialize-Tuple{Any}"><code>DaskDistributedDispatcher.to_deserialize</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">to_deserialize(item)</code></pre><p>Parse and deserialize <code>item</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L105-L109">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.to_key-Tuple{String}" href="#DaskDistributedDispatcher.to_key-Tuple{String}"><code>DaskDistributedDispatcher.to_key</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">to_key(key::String)</code></pre><p>Convert a key to a non-unicode string so that the dask-scheduler can work with it.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L119-L123">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.pack_data-Tuple{Any,Dict}" href="#DaskDistributedDispatcher.pack_data-Tuple{Any,Dict}"><code>DaskDistributedDispatcher.pack_data</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">pack_data(object::Any, data::Dict; key_types::Type=String)</code></pre><p>Merge known <code>data</code> into <code>object</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L126-L130">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.pack_object-Tuple{Any,Dict}" href="#DaskDistributedDispatcher.pack_object-Tuple{Any,Dict}"><code>DaskDistributedDispatcher.pack_object</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">pack_object(object::Any, data::Dict; key_types::Type=key_types)</code></pre><p>Replace a DispatchNode&#39;s key with its result only if <code>object</code> is a known key.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L143-L147">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.unpack_data-Tuple{Any}" href="#DaskDistributedDispatcher.unpack_data-Tuple{Any}"><code>DaskDistributedDispatcher.unpack_data</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">unpack_data(object::Any)</code></pre><p>Unpack <code>DispatchNode</code> objects from <code>object</code>. Returns the unpacked object.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L156-L160">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.unpack_object-Tuple{Any}" href="#DaskDistributedDispatcher.unpack_object-Tuple{Any}"><code>DaskDistributedDispatcher.unpack_object</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">unpack_object(object::Any)</code></pre><p>Replace <code>object</code> with its key if <code>object</code> is a DispatchNode or else returns the original <code>object</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/utils_comm.jl#L169-L174">source</a><br/></section><h2><a class="nav-anchor" id="Server-1" href="#Server-1">Server</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.Server" href="#DaskDistributedDispatcher.Server"><code>DaskDistributedDispatcher.Server</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">Server</code></pre><p>Abstract type to listen for and handle incoming messages.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L3-L7">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.start_listening-Tuple{DaskDistributedDispatcher.Server}" href="#DaskDistributedDispatcher.start_listening-Tuple{DaskDistributedDispatcher.Server}"><code>DaskDistributedDispatcher.start_listening</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">start_listening(server::Server; handler::Function=handle_comm)</code></pre><p>Listen for incoming connections on a port and dispatches them to be handled.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L10-L14">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.handle_comm-Tuple{DaskDistributedDispatcher.Server,TCPSocket}" href="#DaskDistributedDispatcher.handle_comm-Tuple{DaskDistributedDispatcher.Server,TCPSocket}"><code>DaskDistributedDispatcher.handle_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">handle_comm(server::Server, comm::TCPSocket)</code></pre><p>Listen for incoming messages on an established connection.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L29-L33">source</a><br/></section><h2><a class="nav-anchor" id="Rpc-1" href="#Rpc-1">Rpc</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.Rpc" href="#DaskDistributedDispatcher.Rpc"><code>DaskDistributedDispatcher.Rpc</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">Rpc</code></pre><p>Manage open socket connections to a specific address.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L72-L76">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.Rpc-Tuple{DaskDistributedDispatcher.Address}" href="#DaskDistributedDispatcher.Rpc-Tuple{DaskDistributedDispatcher.Address}"><code>DaskDistributedDispatcher.Rpc</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Rpc(address::Address) -&gt; Rpc</code></pre><p>Manage, open, and reuse socket connections to a specific address as required.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L82-L86">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.Rpc,Dict}" href="#DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.Rpc,Dict}"><code>DaskDistributedDispatcher.send_recv</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_recv(rpc::Rpc, msg::Dict) -&gt; Dict</code></pre><p>Send <code>msg</code> and wait for a response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L89-L93">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.start_comm-Tuple{DaskDistributedDispatcher.Rpc}" href="#DaskDistributedDispatcher.start_comm-Tuple{DaskDistributedDispatcher.Rpc}"><code>DaskDistributedDispatcher.start_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">start_comm(rpc::Rpc) -&gt; TCPSocket</code></pre><p>Start a new socket connection.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L101-L105">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.Rpc}" href="#DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.Rpc}"><code>DaskDistributedDispatcher.get_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">get_comm(rpc::Rpc) -&gt; TCPSocket</code></pre><p>Reuse a previously open connection if available, if not, start a new one.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L108-L112">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{DaskDistributedDispatcher.Rpc}" href="#Base.close-Tuple{DaskDistributedDispatcher.Rpc}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Base.close(rpc::Rpc)</code></pre><p>Close all communications.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L122-L126">source</a><br/></section><h2><a class="nav-anchor" id="ConnectionPool-1" href="#ConnectionPool-1">ConnectionPool</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.ConnectionPool" href="#DaskDistributedDispatcher.ConnectionPool"><code>DaskDistributedDispatcher.ConnectionPool</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">ConnectionPool</code></pre><p>Manage a limited number pool of TCPSocket connections to different addresses. Default number of open connections allowed is 512.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L135-L140">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.ConnectionPool-Tuple{Integer}" href="#DaskDistributedDispatcher.ConnectionPool-Tuple{Integer}"><code>DaskDistributedDispatcher.ConnectionPool</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">ConnectionPool(limit::Integer=50) -&gt; ConnectionPool</code></pre><p>Return a new <code>ConnectionPool</code> which limits the total possible number of connections open to <code>limit</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L149-L154">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,Dict}" href="#DaskDistributedDispatcher.send_recv-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,Dict}"><code>DaskDistributedDispatcher.send_recv</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_recv(pool::ConnectionPool, address::String, msg::Dict) -&gt; Dict</code></pre><p>Send <code>msg</code> to <code>address</code> and wait for a response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L165-L169">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address}" href="#DaskDistributedDispatcher.get_comm-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address}"><code>DaskDistributedDispatcher.get_comm</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">get_comm(pool::ConnectionPool, address::Address)</code></pre><p>Get a TCPSocket connection to the given address.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L181-L185">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.reuse-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,TCPSocket}" href="#DaskDistributedDispatcher.reuse-Tuple{DaskDistributedDispatcher.ConnectionPool,DaskDistributedDispatcher.Address,TCPSocket}"><code>DaskDistributedDispatcher.reuse</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">reuse(pool::ConnectionPool, address::Address, comm::TCPSocket)</code></pre><p>Reuse an open communication to the given address.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L211-L215">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.collect_comms-Tuple{DaskDistributedDispatcher.ConnectionPool}" href="#DaskDistributedDispatcher.collect_comms-Tuple{DaskDistributedDispatcher.ConnectionPool}"><code>DaskDistributedDispatcher.collect_comms</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">collect_comms(pool::ConnectionPool)</code></pre><p>Collect open but unused communications to allow opening other ones.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L226-L230">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{DaskDistributedDispatcher.ConnectionPool}" href="#Base.close-Tuple{DaskDistributedDispatcher.ConnectionPool}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Base.close(pool::ConnectionPool)</code></pre><p>Close all communications.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L245-L249">source</a><br/></section><h2><a class="nav-anchor" id="BatchedSend-1" href="#BatchedSend-1">BatchedSend</a></h2><p>(For Internal Use)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.BatchedSend" href="#DaskDistributedDispatcher.BatchedSend"><code>DaskDistributedDispatcher.BatchedSend</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">BatchedSend</code></pre><p>Batch messages in batches on a stream. Batching several messages at once helps performance when sending a myriad of tiny messages. Used by both the julia worker and client to communicate with the scheduler.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L266-L272">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.BatchedSend-Tuple{TCPSocket}" href="#DaskDistributedDispatcher.BatchedSend-Tuple{TCPSocket}"><code>DaskDistributedDispatcher.BatchedSend</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">BatchedSend(comm::TCPSocket; interval::AbstractFloat=0.002) -&gt; BatchedSend</code></pre><p>Batch messages in batches on <code>comm</code>. We send lists of messages every <code>interval</code> milliseconds.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L280-L285">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.background_send-Tuple{DaskDistributedDispatcher.BatchedSend}" href="#DaskDistributedDispatcher.background_send-Tuple{DaskDistributedDispatcher.BatchedSend}"><code>DaskDistributedDispatcher.background_send</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">background_send(batchedsend::BatchedSend)</code></pre><p>Send the messages in <code>batchsend.buffer</code> every <code>interval</code> milliseconds.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L297-L301">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DaskDistributedDispatcher.send_msg-Tuple{DaskDistributedDispatcher.BatchedSend,Union{Array,Dict,String}}" href="#DaskDistributedDispatcher.send_msg-Tuple{DaskDistributedDispatcher.BatchedSend,Union{Array,Dict,String}}"><code>DaskDistributedDispatcher.send_msg</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">send_msg(batchedsend::BatchedSend, msg::Union{String, Array, Dict})</code></pre><p>Schedule a message for sending to the other side. This completes quickly and synchronously.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L315-L319">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{DaskDistributedDispatcher.BatchedSend}" href="#Base.close-Tuple{DaskDistributedDispatcher.BatchedSend}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Base.close(batchedsend::BatchedSend)</code></pre><p>Try to send all remaining messages and then close the connection.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/DaskDistributedDispatcher.jl/tree/fc4c8f917e190b605981ecec9188e29ea16a00ed/src/comm.jl#L322-L326">source</a><br/></section><footer><hr/><a class="previous" href="workers.html"><span class="direction">Previous</span><span class="title">Workers</span></a></footer></article></body></html>
